# 권한 부여

## IAM

### 루트 계정 관리
<p>안전한 관리 방법</p>
<p>

- IAM 관리 사용자 생성
- 루트 사용자 자격 증명 잠금
- IAM 관리 사용자 사용
</p>

<br>

### 자격 증명 기반 정책
<p>

- 연결 대상
    - 사용자
    - 그룹
    - 역할
</p>
<p>

- 정책 유형
    - AWS 관리형
    - 고객 관리형
    - 인라인
</p>
<p>

- 제어
    - 수행 작업
    - 리소스 대상
    - 필요한 조건
</p>

<br>

### 리소스 기반 정책
<p>

- 연결 대상
    - AWS 리소스(ex. Amazon S3, Amazon Glacier 및 KIMS)
</p>
<p>

- 제어
    - ...
    - ...
    - ...
    - ...
</p>

<br><br>

### 권한이 부여된 자격증명
<p>어떤 사용자에게 Amazon EC2 정책, RDS 정책, S3 정책을 부여할 수 있다.</p>
<p>EC2 정책에 인스턴스 생성, 재시작은 허용되고 종료가 거부되어 있다면 해당 사용자는 허용된 동작만 수행할 수 있다.</p>

<br>

### 권한(정책 문서) 적용
<p>정책 문서 적용은 json 파일 작성을 통해 이루어진다.</p>

<br>

### IAM 사용자 그룹
<p>개발자 그룹이 있고 그에 따라 정책이 정의되어 있다면, 신규 직원이 들어왔을 때 해당 그룹에 포함시키면 정의된 정책 그대로 AWS 서비스를 이용할 수 있다.</p>

<br>

### IAM 역할
<p>

**권한**을 **역할**에 연결하고 역할을 사용자 또는 서비스에 **위임**하는 것. 임시로 권한을 부여하기 위해 사용하는 기능이다.
</p>
<p>한 계정이 하루 정도만 다른 그룹에 속해 서비스를 사용해야 할 경우 임시로 그룹에서 나갔다 들어올 필요 없다.</p>

<br><br>

## STS 자격 증명 브로커
### 개요
<p>

STS 자격 증명은 다음과 같은 순서로 이루어진다.
</p>
<p>

1. 어플리케이션을 통해 사용자 엑세스 자격 증명 브로커 생성
2. 자격 증명 브로커 인증
3. AWS STS에서 임시 자격 증명 요청
4. 임시 자격 증명 완료(어플리케이션에서 반환)
</p>

### STS 자격 증명 프로세스
<p>

1. 기업 또는 ... 의 브로커 접근?
2. 사용자 인증
3. AWS 어플리케이션 인증?
4. 사용자가 AWS 서비스 접근
</p>

### SAML 프로세스
<p>

1. 사용자 IdP 탐색
2. IdP 사용자 인증
3. IdP 반환, SAML 어설션
4. 로그인에 SAML 어설션 게시
5. 콘솔로 리디렉션됨
</p>

## Amazon Cognito
<p>

웹 및 모바일 앱에 대한 인증, 권한 부여 및 사용자 관리를 제공하는 완전 관리형 서비스
- 사용자 풀
- 자격 증명 풀

보통 게임 개발 시 유저 권한을 다루기 위해 사용한다.
</p>

## 여러 AWS 계정
<p>

별도의 사업부, 개발/테스트/프로덕션 환경에서 여러 계정을 격리해야 될 때가 있다. 이런 경우 **규정된 워크 로드**, **다른 지리적 위치**, **다른 계정 관리를 위한 별도의 계정**에 따라 보안을 적용할 수 있다.
</p>
<p>

**교차 계정 엑세스**는 기본적으로 **비활성화**되어 있다.</p>

### 여러 AWS 계정을 사용하기 위한 전략
<p>

- 중앙 집중식 보안 관리 → 단일 AWS 계정
- 프로덕션, 개발 및 테스트 환경 분리 → 3개의 AWS 계정
- 여러 개의 자율 부서 → 여러 AWS 계정
- 여러 개의 자율적 독립 프로젝트가 포함된 중앙 집중식 보안 관리 → 여러 AWS 계정
</p>

### AWS Organizations
<p>

기업의 전사 정책은 root 계정에, 팀 별 정책은 OU에 정의하면 OU 하위 AWS 계정은 root 계정의 정책과 해당 계정이 포함된 OU 계정에 영향을 받는다.
</p>