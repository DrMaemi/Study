# Amazon Network System

## 프라이빗, 퍼블릭 서브넷
<p>사용 사례</p>
<p>

- 데이터 스토어 인스턴스 → 프라이빗 서브넷
- 배치 처리 인스턴스 → 프라이빗 서브넷
- 백엔드 인스턴스 → 프라이빗 서브넷
- 웹 어플리케이션 인스턴스 → 퍼블릭 or 프라이빗 서브넷
</p>

<br><br>

## 탄력적 네트워크 인터페이스(ENI)
<p>네트워크 카드와 같다.</p>
<p>

탄력적 네트워크 인터페이스(ENI)는 **가상 네트워크 인터페이스**이다. 동일한 가용영역 안에서 EC2 인스턴스간 이동이 가능하다.</p>
<p>

새 인스턴스로 이동하면 네트워크 인터페이스는 다음을 유지한다.
- 프라이빗 IP 주소
- 탄력적 IP 주소
- MAC 주소
</p>

<br><br>

## 탄력적 IP 주소
<p>

EC2 인스턴스를 삭제하고 다시 생성해도 퍼블릭 IP가 바뀌지 않길 원하는 경우 탄력적 IP 주소를 사용한다.
</p>
<p>

- 인스턴스 또는 네트워크 인터페이스에 연결할 수 있다.
- 즉시 트래픽을 재연결하고 전송할 수 있다
- AS 리전당 5개 허용(무료)
- BYOIP(Bring Your Own IP)주소를 생성할 수 있다.
</p>
<p>

탄력적 IP는 무료이지만, **신청하고 사용하지 않는 경우** 요금을 청구한다.
</p>
<p>EC2 인스턴스에 탄력적 IP 주소를 할당한 후 해당 인스턴스를 삭제하면 탄력적 IP 주소는 남게 되어 요금을 청구하는 실수를 많이 한다.</p>

<br><br>

## 보안 그룹
### 체인 다이어그램

<br><br>

## 네트워크 ACL(엑세스 제어 목록)
<p>

- 서브넷 경계의 방화벽
- 기본 NACL은 모든 인바운드 및 아웃바운드 트래픽을 허용
- 상태 비저장이므로 인바운드 및 아운바운드 트래픽 모두에 대한 명시적 규칙 필요
</p>

<br><br>

## VPC 네트워크 인프라
<p>VPC란 공유되지 않는 고립된 네트워크 환경을 구성하기 위해 사용하는 네트워크 구조이다.</p>

<br>

### 다중 보호 계층이 있는 인프라 구조

<br>

### VPC로 트래픽 보내기

<br><br>

## VPC 피어링
<p>

- 인터넷 게이트웨이 또는 가상 게이트웨이가 필요 없음
- 고가용성 연결, 단일 장애 지점 없음
- 대역폭 병목 현상 없음
- 트래픽은 항상 글로벌 AWS 백본에서 유지됨
</p>

## VPC 연결 - Transit Gateway
<p>

- 단일 게이트웨이로 최대 **5,000개의 VPC**와 **온프레미스 환경** 연결
- 네트워크 사이를 이동하는 모든 트래픽의 허브 역할 담당
- 가용성이 뛰어나고 유연한 완전 관리형 라우팅 서비스
- 멀티캐스트 및 리전 간 피어링 허용
</p>

## VPC 엔드포인트
<p>AWS로 구성한 서비스 간 네트워킹 시 퍼블릭 IP로 붙게 되면 성능 하락의 주 요인이 됨.</p>
<p>

VPC 엔드 포인트를 이용하면 **AWS를 벗어나지 않고** EC2 인스턴스를 VPC 외부 서비스와 프라이빗 IP로 연결할 수 있다.</p>
<p>인터넷 게이트웨이, VPN, NAT 디바이스 또는 방화벽 프록시를 사용할 필요가 없다.</p>
<p>VPC 엔드포인트 특징</p>
<p>

- 인터넷을 통해 통신할 필요 없음
- 동일한 리전에 있어야 함
- 가용성이 뛰어나고, 중복적이며, 수평적으로 확장됨
</p>

<p>엔드 포인트는 두 종류가 있음</p>
<p>

1. 인터페이스 엔드포인트
    - Amazon CloudWatch Logs
    - AWS CodeBuild
    - Elastic Load Balancing API
    - AWS Key Management Service(AWS KMS)
    - Amazon Kinesis Data Streams
    - ...
</p>
<p>

2. 게이트웨이 엔드포인트
    - Amazon S3
    - Amazon DynamoDB
</p>
<p>게이트웨이 엔드포인트를 이용하는 경우 서비스 내부 라우팅 테이블 설정을 해줘야 함?</p>